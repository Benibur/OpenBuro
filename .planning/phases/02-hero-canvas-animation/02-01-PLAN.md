---
phase: 02-hero-canvas-animation
plan: 01
type: execute
wave: 1
depends_on: ["01-03"]
files_modified:
  - index.html
autonomous: false
must_haves:
  truths:
    - "User sees full-height hero section with animated constellation background"
    - "Canvas animation runs smoothly at 60 FPS on desktop and 30+ FPS on mobile"
    - "Hero text elements (badge, headline, subtitle, CTAs, credit) appear in sequence"
    - "Animation pauses when hero scrolls offscreen"
    - "Animation respects prefers-reduced-motion preference"
  artifacts:
    - path: "index.html"
      provides: "Hero section with canvas constellation and text elements"
      contains: "<section id=\"hero\""
    - path: "index.html"
      provides: "Canvas animation JavaScript module"
      contains: "class ParticleNetwork"
    - path: "index.html"
      provides: "Text sequencing animation"
      contains: "hero-text-fade"
  key_links:
    - from: "ParticleNetwork class"
      to: "#hero-canvas element"
      via: "canvas context initialization"
      pattern: "getElementById.*hero-canvas"
    - from: "Intersection Observer"
      to: "ParticleNetwork.isVisible"
      via: "visibility state management"
      pattern: "IntersectionObserver.*hero-canvas"
    - from: "CSS animation keyframes"
      to: ".hero-text elements"
      via: "sequential animation delays"
      pattern: "animation-delay"
---

<objective>
Create the impressive first-screen hero experience with animated network constellation that performs smoothly across all devices.

Purpose: Deliver the critical first impression that signals Open Buro's technical sophistication while ensuring smooth performance on European 4G mobile connections.

Output: Fully functional hero section with performant canvas animation, sequenced text reveals, and scroll indicator.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/research/STACK.md
@.planning/research/PITFALLS.md

# Reference Phase 1 output for base structure
@.planning/phases/01-foundation-design-system/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Implement hero HTML structure and canvas element</name>
  <files>index.html</files>
  <action>
    Add hero section structure to index.html within the main element, positioned as first content section after navbar:

    - Create full-height hero section (`min-h-screen` with relative positioning) with ID "hero"
    - Add canvas element with ID "hero-canvas" (absolute positioning, full hero dimensions, z-index below text)
    - Add hero content wrapper (relative z-index above canvas) containing:
      * Surtitle badge ("EUROPEAN OPEN STANDARD" or similar)
      * H1 headline with gradient text treatment
      * Subtitle paragraph
      * CTA button group (primary "Join the Alliance", secondary "Learn More")
      * Origin credit line ("Born from La Suite numérique + Twake.ai")
    - Add animated scroll indicator at bottom (chevron icon with pulse animation)

    Use design system classes from Phase 1 for spacing, typography, colors. All hero text elements should have class "hero-text" for animation targeting. Canvas should use CSS variables for constellation colors (--color-accent-blue for nodes, --color-border-subtle for lines).
  </action>
  <verify>
    Open index.html in browser and verify:
    - Hero section displays at full viewport height
    - Canvas element is visible and positioned correctly
    - All text elements are readable and properly styled
    - Scroll indicator appears at bottom of hero
    - Run: grep -c "hero-canvas" index.html (should return 1+)
  </verify>
  <done>
    Hero section structure exists with canvas element, all text content displays correctly, scroll indicator visible.
  </done>
</task>

<task type="auto">
  <name>Implement canvas constellation animation with performance optimization</name>
  <files>index.html</files>
  <action>
    Add JavaScript module within `<script>` tag in index.html (before closing `</body>`) to create performant canvas animation:

    Create `ParticleNetwork` class with:
    - Constructor: Initialize canvas context, create 15-25 particles with random positions and velocities (vx, vy between -0.5 and 0.5)
    - `init()`: Set canvas dimensions to window size, create particle array with {x, y, vx, vy} objects, use integer coordinates (Math.floor) for performance
    - `animate()`:
      * Clear canvas with semi-transparent fill (creates trailing effect)
      * Update particle positions, bounce off edges
      * Draw particles as small circles (2-3px radius) in accent-blue color with opacity 0.12-0.15
      * Calculate distances between particles, draw connecting lines (opacity based on distance, max 150px connection distance) in border-subtle color
      * Use requestAnimationFrame for smooth 60 FPS timing
    - `setupIntersectionObserver()`: Create observer watching hero-canvas, set `isVisible` flag, pause animation when offscreen via cancelAnimationFrame
    - Detect mobile (window.innerWidth < 768px) and reduce particle count to 15 for performance
    - Check prefers-reduced-motion media query and disable animation if user prefers reduced motion

    Initialize on DOMContentLoaded. Handle window resize with debounced canvas dimension update (250ms debounce to avoid performance hit).

    Reference research STACK.md Canvas Animation Best Practices section for implementation pattern. Use PITFALLS.md Pitfall 3 (Canvas Animation Performance) prevention strategies.
  </action>
  <verify>
    Open index.html in browser (desktop and mobile viewport):
    - Desktop: Animation runs at 60 FPS (check Chrome DevTools Performance tab)
    - Mobile: Animation runs at 30+ FPS (check on actual device or throttled DevTools)
    - Scroll hero offscreen: Animation pauses (verify via browser Performance profiler showing no RAF calls)
    - Check in Chrome DevTools with "Emulate CSS media" > "prefers-reduced-motion: reduce": Animation should not run
    - Run: node -e "console.log(require('fs').readFileSync('index.html', 'utf8').includes('requestAnimationFrame'))" (should return true)
  </verify>
  <done>
    Canvas constellation animates smoothly on desktop (60 FPS) and mobile (30+ FPS), pauses when offscreen, respects prefers-reduced-motion, shows 15-25 connected nodes drifting.
  </done>
</task>

<task type="auto">
  <name>Implement hero text sequencing and scroll indicator animation</name>
  <files>index.html</files>
  <action>
    Add CSS animations and JavaScript initialization for text sequencing:

    CSS animations (in `<style>` section):
    - Define `@keyframes heroTextFade` for fade-in with translateY (0 to 1 opacity, 20px upward movement)
    - Define `@keyframes scrollPulse` for chevron pulse (scale 1 to 1.2, opacity 0.5 to 1)
    - Apply to `.hero-text` class: opacity 0 initially, animation applies heroTextFade 0.8s ease-out forwards
    - Use progressive animation-delay for each hero-text element (0ms, 200ms, 400ms, 600ms, 800ms for 5 elements)
    - Apply scrollPulse animation to scroll indicator: infinite 2s ease-in-out

    JavaScript:
    - On DOMContentLoaded, select all `.hero-text` elements
    - Set animation-delay via inline style based on element index: `element.style.animationDelay = ${index * 200}ms`
    - Ensures text appears in sequence: badge → headline → subtitle → CTAs → credit

    No external libraries. Pure CSS animations with JS for dynamic delay assignment.
  </action>
  <verify>
    Open index.html and observe hero section load:
    - Text elements fade in sequentially with 200ms stagger (badge first, credit last)
    - Scroll indicator pulses smoothly at bottom of hero
    - All animations complete within 1.6 seconds (5 elements * 200ms + 800ms animation duration)
    - Run: grep -c "heroTextFade" index.html (should return 1+)
    - Run: grep -c "scrollPulse" index.html (should return 1+)
  </verify>
  <done>
    Hero text elements appear in smooth sequenced animation (200ms stagger), scroll indicator pulses continuously, all animations use GPU-accelerated properties (transform, opacity).
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify hero animation performance and user experience</name>
  <what-built>
    Complete hero section with animated constellation background, sequenced text reveals, and scroll indicator. Canvas animation pauses when offscreen and respects accessibility preferences.
  </what-built>
  <how-to-verify>
    1. Open index.html in browser (Chrome or Firefox)
    2. Verify hero displays full-screen with:
       - Animated constellation of 15-25 nodes drifting smoothly
       - Connecting lines between nearby nodes
       - Text elements fading in sequentially (badge → headline → subtitle → CTAs → credit)
       - Pulsing scroll indicator at bottom
    3. Scroll down past hero section and verify canvas animation stops (open DevTools Performance profiler to confirm no requestAnimationFrame calls)
    4. Scroll back up and verify animation resumes
    5. Test on mobile viewport (DevTools responsive mode or actual device):
       - Animation runs smoothly (no jank)
       - Text is readable
       - Buttons are large enough to tap
    6. Test accessibility: Chrome DevTools > Rendering > "Emulate CSS media: prefers-reduced-motion: reduce"
       - Verify animation does not run or runs in simplified mode
    7. Open DevTools Performance tab, record 10 seconds of hero animation:
       - Desktop: Should show consistent 60 FPS
       - Mobile (throttled CPU): Should show 30+ FPS
  </how-to-verify>
  <resume-signal>
    Type "approved" if hero experience meets expectations, or describe specific issues (animation performance, visual appearance, text sequencing, accessibility).
  </resume-signal>
</task>

</tasks>

<verification>
After checkpoint approval, verify:
- [ ] HERO-01: Full-screen hero with gradient background and animated canvas constellation exists
- [ ] HERO-02: Canvas renders 15-25 drifting nodes with connection lines, uses requestAnimationFrame, pauses offscreen
- [ ] HERO-03: Hero displays badge, H1, subtitle, two CTAs, origin credit
- [ ] HERO-04: Text elements appear with 200ms stagger animation
- [ ] HERO-05: Animated scroll indicator (chevron) visible at bottom
- [ ] HERO-06: Canvas animation checks prefers-reduced-motion and disables/simplifies accordingly
- [ ] Performance: Desktop 60 FPS, mobile 30+ FPS (Chrome DevTools Performance)
- [ ] Accessibility: No animation with prefers-reduced-motion
- [ ] Code quality: No console errors, no layout thrashing warnings in Performance tab
</verification>

<success_criteria>
- User sees impressive full-height hero with smoothly animated constellation background
- Canvas animation performs at 60 FPS on desktop and 30+ FPS on mobile without battery drain
- Text elements fade in with smooth 200ms sequential delay creating polished entrance
- Scroll indicator pulses invitingly, guiding user to explore content
- Animation intelligently pauses when offscreen, conserving device resources
- Users with motion sensitivity preferences see static or simplified experience
- No performance warnings in Lighthouse audit (run lighthouse on hero section)
</success_criteria>

<output>
After completion, create `.planning/phases/02-hero-canvas-animation/02-01-SUMMARY.md` documenting:
- Canvas animation implementation approach (particle count, connection algorithm, performance optimizations)
- Text sequencing strategy (CSS animations vs JavaScript, timing choices)
- Accessibility considerations (prefers-reduced-motion handling)
- Performance metrics (FPS on desktop/mobile, Lighthouse scores)
- Any deviations from plan or lessons learned
</output>
