---
phase: 07-performance-launch
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
autonomous: true

must_haves:
  truths:
    - "Page CSS payload is minimized (< 50 KB total)"
    - "Fonts load without blocking render"
    - "All interactive elements are keyboard accessible"
    - "Color contrast meets WCAG AA standards"
    - "Screen readers announce all content properly"
  artifacts:
    - path: "index.html"
      provides: "Optimized CSS and font loading"
      contains: "font-display: swap"
    - path: "index.html"
      provides: "Complete ARIA labels and semantic HTML"
      contains: "aria-label"
  key_links:
    - from: "index.html <head>"
      to: "fonts.googleapis.com"
      via: "preconnect"
      pattern: "<link rel=\"preconnect\""
    - from: "index.html navigation"
      to: "keyboard events"
      via: "tabindex and ARIA"
      pattern: "aria-label|role="
---

<objective>
Optimize CSS payload, font loading, and complete accessibility audit to achieve Lighthouse Performance and Accessibility scores > 90.

Purpose: Ensure fast load times on 4G connections and full keyboard/screen reader accessibility
Output: Optimized index.html with minimal CSS, efficient font loading, complete ARIA labels, and proper semantic structure
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/research/PITFALLS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Optimize CSS Payload and Font Loading</name>
  <files>index.html</files>
  <action>
Minimize Tailwind CSS payload and optimize font loading for production performance:

**CSS Optimization:**
1. Analyze currently used Tailwind classes in index.html
2. Replace Tailwind CDN script with inline critical CSS extracted from used classes only
3. Target: CSS payload < 50 KB total (inline + external if needed)
4. If extracting all used classes exceeds 50 KB, inline only above-the-fold critical CSS, load rest as external stylesheet

**Font Loading Optimization:**
5. Add preconnect to fonts.googleapis.com and fonts.gstatic.com in <head>:
   ```html
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   ```
6. Ensure all Google Fonts links use `&display=swap` parameter to prevent invisible text (FOIT)
7. Limit to 2 font weights maximum per family (regular + bold) to minimize weight
8. Verify font declarations use font-display: swap in @font-face if using custom CSS

**Why this approach:**
- Tailwind CDN loads 300+ KB unused CSS causing FOUC (Pitfall 1 from PITFALLS.md)
- Font blocking causes poor Performance scores (Pitfall 5)
- Per PERF-01: must load < 2s on 4G, requires aggressive CSS minimization

**What to avoid:**
- Do NOT use full Tailwind CDN in production (development only)
- Do NOT inline everything - external cached CSS is fine if > 14 KB
- Do NOT load more than 2 weights per font family
- Do NOT omit preconnect - causes 500ms+ delay
  </action>
  <verify>
1. Run: `wc -c index.html` - verify total file size
2. Check <head> contains preconnect links
3. Check all font URLs contain `&display=swap`
4. Inspect Network tab: CSS payload < 50 KB, fonts load in parallel
  </verify>
  <done>
CSS payload reduced to < 50 KB, fonts use display=swap and preconnect, no Tailwind CDN script tag in production HTML
  </done>
</task>

<task type="auto">
  <name>Task 2: Complete Accessibility Audit</name>
  <files>index.html</files>
  <action>
Audit and fix accessibility issues to achieve Lighthouse Accessibility score > 90:

**Semantic HTML Structure:**
1. Verify proper heading hierarchy (single h1, h2-h6 in order, no skipped levels)
2. Ensure all sections use semantic landmarks: <header>, <nav>, <main>, <section>, <footer>
3. Check all images have descriptive alt text (not "image" or empty for decorative images use alt="")

**ARIA Labels:**
4. Add aria-label to navbar: `<nav aria-label="Main navigation">`
5. Add aria-label to mobile menu button: `<button aria-label="Open navigation menu" aria-expanded="false">`
6. Add aria-label to all icon-only buttons (e.g., social media links)
7. Add aria-label to newsletter form: `<form aria-label="Newsletter subscription">`
8. Ensure CTA buttons have descriptive text (not just icons)

**Keyboard Navigation:**
9. Verify all interactive elements are keyboard accessible (tabindex="0" if needed)
10. Check mobile menu can be opened/closed with Enter/Space keys
11. Ensure focus indicators are visible (outline or ring on :focus-visible)
12. Verify tab order follows logical content flow

**Color Contrast:**
13. Check all text meets WCAG AA contrast ratios:
    - Normal text: 4.5:1 minimum
    - Large text (18pt+): 3:1 minimum
14. Use browser DevTools Lighthouse audit to identify contrast failures
15. Fix any failing text colors (common issue: light gray on dark background)

**Form Accessibility:**
16. Ensure email input has proper label association: `<label for="email">` + `<input id="email">`
17. Add aria-required="true" to required fields
18. Ensure form validation errors are announced to screen readers

**What to avoid:**
- Do NOT use placeholder text as labels (accessibility violation)
- Do NOT use div/span for buttons (use <button> element)
- Do NOT omit alt text on images
- Do NOT use color alone to convey information

Per PITFALLS.md Pitfall 8: all touch targets must be ≥ 48x48px for mobile.
  </action>
  <verify>
1. Run: `npx lighthouse index.html --view` - check Accessibility score > 90
2. Test keyboard navigation: Tab through all elements, verify focus visible
3. Test with screen reader: `open -a VoiceOver` (macOS) and navigate page
4. Check DevTools Lighthouse "Accessibility" section for any remaining issues
  </verify>
  <done>
Heading hierarchy correct (h1 → h2 → h3), all interactive elements have ARIA labels, color contrast passes WCAG AA, keyboard navigation works through all elements, Lighthouse Accessibility score > 90
  </done>
</task>

</tasks>

<verification>
**Overall Phase Checks:**

1. **CSS Optimization Verified:**
   - Total CSS payload < 50 KB
   - No Tailwind CDN script in HTML
   - Fonts use preconnect and display=swap

2. **Accessibility Verified:**
   - Lighthouse Accessibility score ≥ 90
   - All images have alt text
   - All buttons have ARIA labels
   - Keyboard navigation works
   - Color contrast passes WCAG AA

3. **Performance Baseline Established:**
   - Ready for Plan 02 final verification
   - Lighthouse Performance should already show improvement
</verification>

<success_criteria>
1. CSS payload reduced from 300+ KB (CDN) to < 50 KB
2. Fonts load without blocking render (preconnect + display=swap)
3. Lighthouse Accessibility score > 90
4. All interactive elements keyboard accessible
5. Color contrast meets WCAG AA (4.5:1 for normal text)
6. Screen reader announces all content with proper labels
</success_criteria>

<output>
After completion, create `.planning/phases/07-performance-launch/07-01-SUMMARY.md`
</output>
